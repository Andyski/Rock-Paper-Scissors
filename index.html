<!DOCTYPE html>
<html>
<head>
  <title>Function scope example</title>
  <link rel='stylesheet' href="index.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
</head>
<body>
    <div>
        <h1>Rock Paper Scissors</h1>
        <h2>First to 3 wins, make your choice.</h2>
    </div>
    <div>
        <div class="playerChoice">
          <button id="rockButton" type="submit" style="border: 0; background: transparent; outline: none"><img id="Rock" src="Rock-Icon.png" alt="rockIcon"></button>
          <button id="paperButton" type="submit" style="border: 0; background: transparent; outline: none"><img id="Paper" src="Paper-Icon.png" alt="paperIcon"></button>
          <button id="scissorsButton" type="submit" style="border: 0; background: transparent; outline: none"><img id="Scissors" src="Scissor-Icon.png" alt="scissorsIcon"></button>
        </div>
     <div class="container">
        <div class="container1">
        <p id="playerChoice">Player Choice:</p>
        <p id="compChoice">Computer Choice:</p>
        <p id="roundResult"></p>
        </div>
        <div class="container2">
         <p id="p1"></p>
         <p id="p2"></p>
         <p id="p3"></p>
        </div>
    </div>
    <div id="image1"></div>
    <h3></h3>
    <div class="image2" type="submit"></div>
  </div>
  
  
<script>

    let playerScore = 0;   
    let computerScore = 0;
    let buttons = document.querySelectorAll('button');
    buttonEvent();

    document.getElementById("p1").innerHTML = "Player Score = "+playerScore+"";
    document.getElementById("p2").innerHTML = "Computer Score = "+computerScore+"";

    function buttonEvent(){
        buttons.forEach(button => button.addEventListener('click', displayRound));
        buttons.forEach(button => button.addEventListener('click', iconSelect));
    }

    function iconSelect() {
        event.target.style.transform = "rotate(360deg)";
    }

    function displayRound(e){
            let compChoice = computerPlay();

            let computerChoice = document.querySelector('#compChoice');
            let playerChoice = document.querySelector('#playerChoice');

            playerChoice.textContent = 'Player Choice: ' + e.target.id;
            computerChoice.textContent = 'Computer Choice: ' + compChoice;
            
            console.log(playRound(e.target.id, compChoice));

            if(playerScore === 3 || computerScore === 3){
                buttons.forEach(button => button.removeEventListener('click', displayRound));
                let finalScore = document.querySelector('#p3');
                let finalResult = document.querySelector("h3")

                finalScore.textContent = 'Final Score';
                if(playerScore > computerScore){
                    finalResult.textContent = 'YOU WIN!';
                    document.body.style.backgroundImage = "url('fireworks-image2.gif')";
                    document.body.style.backgroundSize = "33% 50%";
                    document.body.style.backgroundRepeat = "repeat-x";
                    document.body.style.backgroundAttachment = "fixed";
                    document.body.style.backgroundPosition = "left bottom";
                }
                else{
                    finalResult.textContent = 'COMPUTER WINS!';
                }
                return;
            }
        }


    function computerPlay(){
        let choices = ['Rock','Paper','Scissors'];
        valueToUse = choices[Math.floor(Math.random() * choices.length)];
        return valueToUse;
    }

    function playRound(playerSelection, computerSelection){
        if(playerSelection == 'Rock' && computerSelection == 'Scissors') {
            document.getElementById("roundResult").innerHTML = "Rock beats Scissors, you win!";
            playerScore++;
            document.getElementById("p1").innerHTML = "Player Score = "+playerScore+"";
        }
        else if (playerSelection == 'Rock' && computerSelection == 'Paper') {
            document.getElementById("roundResult").innerHTML = "Paper beats rock, you lose!";
            computerScore++;
            document.getElementById("p2").innerHTML = "Computer Score = "+computerScore+"";
        }
        else if (playerSelection == 'Rock' && computerSelection == 'Rock'){
            document.getElementById("roundResult").innerHTML = "Rock vs Rock, it's a tie !";
        }
        else if (playerSelection == 'Paper' && computerSelection == 'Rock'){
            document.getElementById("roundResult").innerHTML = "Paper beats rock, you win!";
            playerScore++;
            document.getElementById("p1").innerHTML = "Player Score = "+playerScore+"";
        }
        else if (playerSelection == 'Paper' && computerSelection == 'Scissors'){ 
            document.getElementById("roundResult").innerHTML = "Scissors beat paper, you lose!";
            computerScore++;
            document.getElementById("p2").innerHTML = "Computer Score = "+computerScore+"";
        }
        else if (playerSelection == 'Paper' && computerSelection == 'Paper'){
            document.getElementById("roundResult").innerHTML = "Paper vs Paper, it's a tie!";
        }
        else if (playerSelection == 'Scissors' && computerSelection == 'Paper') {
            document.getElementById("roundResult").innerHTML = "Scissors beat paper, you win!";
            playerScore++;
            document.getElementById("p1").innerHTML = "Player Score = "+playerScore+"";
        }
        else if (playerSelection == 'Scissors' && computerSelection == 'Rock'){
            document.getElementById("roundResult").innerHTML = "Rock beats Scissors, you lose!";
            computerScore++;
            document.getElementById("p2").innerHTML = "Computer Score = "+computerScore+"";
        }
        else if (playerSelection == 'Scissors' && computerSelection == 'Scissors'){
            document.getElementById("roundResult").innerHTML = "Scissors vs Scissors, it's a tie!";
        }
    
    }


  </script>
</body>
</html>